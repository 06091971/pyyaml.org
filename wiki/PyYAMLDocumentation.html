<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link href="data:text/css;charset=utf-8,%0A%0A%0Ahtml%20%7B%0Aline%2Dheight%3A%201%2E15%3B%20%0A%2Dms%2Dtext%2Dsize%2Dadjust%3A%20100%25%3B%20%0A%2Dwebkit%2Dtext%2Dsize%2Dadjust%3A%20100%25%3B%20%0A%7D%0A%0A%0Abody%20%7B%0Amargin%3A%200%3B%0A%7D%0A%0Aarticle%2C%0Aaside%2C%0Afooter%2C%0Aheader%2C%0Anav%2C%0Asection%20%7B%0Adisplay%3A%20block%3B%0A%7D%0A%0Ah1%20%7B%0Afont%2Dsize%3A%202em%3B%0Amargin%3A%200%2E67em%200%3B%0A%7D%0A%0A%0Afigcaption%2C%0Afigure%2C%0Amain%20%7B%20%0Adisplay%3A%20block%3B%0A%7D%0A%0Afigure%20%7B%0Amargin%3A%201em%2040px%3B%0A%7D%0A%0Ahr%20%7B%0Abox%2Dsizing%3A%20content%2Dbox%3B%20%0Aheight%3A%200%3B%20%0Aoverflow%3A%20visible%3B%20%0A%7D%0A%0Apre%20%7B%0Afont%2Dfamily%3A%20monospace%2C%20monospace%3B%20%0Afont%2Dsize%3A%201em%3B%20%0A%7D%0A%0A%0Aa%20%7B%0Abackground%2Dcolor%3A%20transparent%3B%20%0A%2Dwebkit%2Dtext%2Ddecoration%2Dskip%3A%20objects%3B%20%0A%7D%0A%0Aabbr%5Btitle%5D%20%7B%0Aborder%2Dbottom%3A%20none%3B%20%0Atext%2Ddecoration%3A%20underline%3B%20%0Atext%2Ddecoration%3A%20underline%20dotted%3B%20%0A%7D%0A%0Ab%2C%0Astrong%20%7B%0Afont%2Dweight%3A%20inherit%3B%0A%7D%0A%0Ab%2C%0Astrong%20%7B%0Afont%2Dweight%3A%20bolder%3B%0A%7D%0A%0Acode%2C%0Akbd%2C%0Asamp%20%7B%0Afont%2Dfamily%3A%20monospace%2C%20monospace%3B%20%0Afont%2Dsize%3A%201em%3B%20%0A%7D%0A%0Adfn%20%7B%0Afont%2Dstyle%3A%20italic%3B%0A%7D%0A%0Amark%20%7B%0Abackground%2Dcolor%3A%20%23ff0%3B%0Acolor%3A%20%23000%3B%0A%7D%0A%0Asmall%20%7B%0Afont%2Dsize%3A%2080%25%3B%0A%7D%0A%0Asub%2C%0Asup%20%7B%0Afont%2Dsize%3A%2075%25%3B%0Aline%2Dheight%3A%200%3B%0Aposition%3A%20relative%3B%0Avertical%2Dalign%3A%20baseline%3B%0A%7D%0Asub%20%7B%0Abottom%3A%20%2D0%2E25em%3B%0A%7D%0Asup%20%7B%0Atop%3A%20%2D0%2E5em%3B%0A%7D%0A%0A%0Aaudio%2C%0Avideo%20%7B%0Adisplay%3A%20inline%2Dblock%3B%0A%7D%0A%0Aaudio%3Anot%28%5Bcontrols%5D%29%20%7B%0Adisplay%3A%20none%3B%0Aheight%3A%200%3B%0A%7D%0A%0Aimg%20%7B%0Aborder%2Dstyle%3A%20none%3B%0A%7D%0A%0Asvg%3Anot%28%3Aroot%29%20%7B%0Aoverflow%3A%20hidden%3B%0A%7D%0A%0A%0Abutton%2C%0Ainput%2C%0Aoptgroup%2C%0Aselect%2C%0Atextarea%20%7B%0Afont%2Dfamily%3A%20sans%2Dserif%3B%20%0Afont%2Dsize%3A%20100%25%3B%20%0Aline%2Dheight%3A%201%2E15%3B%20%0Amargin%3A%200%3B%20%0A%7D%0A%0Abutton%2C%0Ainput%20%7B%20%0Aoverflow%3A%20visible%3B%0A%7D%0A%0Abutton%2C%0Aselect%20%7B%20%0Atext%2Dtransform%3A%20none%3B%0A%7D%0A%0Abutton%2C%0Ahtml%20%5Btype%3D%22button%22%5D%2C%20%0A%5Btype%3D%22reset%22%5D%2C%0A%5Btype%3D%22submit%22%5D%20%7B%0A%2Dwebkit%2Dappearance%3A%20button%3B%20%0A%7D%0A%0Abutton%3A%3A%2Dmoz%2Dfocus%2Dinner%2C%0A%5Btype%3D%22button%22%5D%3A%3A%2Dmoz%2Dfocus%2Dinner%2C%0A%5Btype%3D%22reset%22%5D%3A%3A%2Dmoz%2Dfocus%2Dinner%2C%0A%5Btype%3D%22submit%22%5D%3A%3A%2Dmoz%2Dfocus%2Dinner%20%7B%0Aborder%2Dstyle%3A%20none%3B%0Apadding%3A%200%3B%0A%7D%0A%0Abutton%3A%2Dmoz%2Dfocusring%2C%0A%5Btype%3D%22button%22%5D%3A%2Dmoz%2Dfocusring%2C%0A%5Btype%3D%22reset%22%5D%3A%2Dmoz%2Dfocusring%2C%0A%5Btype%3D%22submit%22%5D%3A%2Dmoz%2Dfocusring%20%7B%0Aoutline%3A%201px%20dotted%20ButtonText%3B%0A%7D%0A%0Afieldset%20%7B%0Apadding%3A%200%2E35em%200%2E75em%200%2E625em%3B%0A%7D%0A%0Alegend%20%7B%0Abox%2Dsizing%3A%20border%2Dbox%3B%20%0Acolor%3A%20inherit%3B%20%0Adisplay%3A%20table%3B%20%0Amax%2Dwidth%3A%20100%25%3B%20%0Apadding%3A%200%3B%20%0Awhite%2Dspace%3A%20normal%3B%20%0A%7D%0A%0Aprogress%20%7B%0Adisplay%3A%20inline%2Dblock%3B%20%0Avertical%2Dalign%3A%20baseline%3B%20%0A%7D%0A%0Atextarea%20%7B%0Aoverflow%3A%20auto%3B%0A%7D%0A%0A%5Btype%3D%22checkbox%22%5D%2C%0A%5Btype%3D%22radio%22%5D%20%7B%0Abox%2Dsizing%3A%20border%2Dbox%3B%20%0Apadding%3A%200%3B%20%0A%7D%0A%0A%5Btype%3D%22number%22%5D%3A%3A%2Dwebkit%2Dinner%2Dspin%2Dbutton%2C%0A%5Btype%3D%22number%22%5D%3A%3A%2Dwebkit%2Douter%2Dspin%2Dbutton%20%7B%0Aheight%3A%20auto%3B%0A%7D%0A%0A%5Btype%3D%22search%22%5D%20%7B%0A%2Dwebkit%2Dappearance%3A%20textfield%3B%20%0Aoutline%2Doffset%3A%20%2D2px%3B%20%0A%7D%0A%0A%5Btype%3D%22search%22%5D%3A%3A%2Dwebkit%2Dsearch%2Dcancel%2Dbutton%2C%0A%5Btype%3D%22search%22%5D%3A%3A%2Dwebkit%2Dsearch%2Ddecoration%20%7B%0A%2Dwebkit%2Dappearance%3A%20none%3B%0A%7D%0A%0A%3A%3A%2Dwebkit%2Dfile%2Dupload%2Dbutton%20%7B%0A%2Dwebkit%2Dappearance%3A%20button%3B%20%0Afont%3A%20inherit%3B%20%0A%7D%0A%0A%0Adetails%2C%20%0Amenu%20%7B%0Adisplay%3A%20block%3B%0A%7D%0A%0Asummary%20%7B%0Adisplay%3A%20list%2Ditem%3B%0A%7D%0A%0A%0Acanvas%20%7B%0Adisplay%3A%20inline%2Dblock%3B%0A%7D%0A%0Atemplate%20%7B%0Adisplay%3A%20none%3B%0A%7D%0A%0A%0A%5Bhidden%5D%20%7B%0Adisplay%3A%20none%3B%0A%7D%0A" rel="stylesheet" type="text/css" />
  <link href="data:text/css;charset=utf-8,body%20%7B%0Amargin%3A%20auto%3B%0Apadding%3A%201em%3B%0Amax%2Dwidth%3A%2044em%3B%20%7D%0A" rel="stylesheet" type="text/css" />
</head>
<body>
<h1 id="pyyaml-documentation">PyYAML Documentation</h1>
<p><em>PyYAML is now maintained at <a href="https://github.com/yaml/pyyaml" class="uri">https://github.com/yaml/pyyaml</a>. This page is left for historical purposes.</em></p>
<h2 id="installation">Installation</h2>
<p>Download the source package <em>PyYAML-3.12.tar.gz</em> and unpack it. Go to the directory <em>PyYAML-3.12</em> and run</p>
<pre><code>$ python setup.py install</code></pre>
<p>If you want to use LibYAML bindings, which are much faster than the pure Python version, you need to download and install <a href="./LibYAML">LibYAML</a>. Then you may build and install the bindings by executing</p>
<pre><code>$ python setup.py --with-libyaml install</code></pre>
<p>In order to use <a href="./LibYAML">LibYAML</a> based parser and emitter, use the classes <code>CParser</code> and <code>CEmitter</code>. For instance,</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">from</span> yaml <span class="im">import</span> load, dump
<span class="cf">try</span>:
    <span class="im">from</span> yaml <span class="im">import</span> CLoader <span class="im">as</span> Loader, CDumper <span class="im">as</span> Dumper
<span class="cf">except</span> <span class="pp">ImportError</span>:
    <span class="im">from</span> yaml <span class="im">import</span> Loader, Dumper

<span class="co"># ...</span>

data <span class="op">=</span> load(stream, Loader<span class="op">=</span>Loader)

<span class="co"># ...</span>

output <span class="op">=</span> dump(data, Dumper<span class="op">=</span>Dumper)</code></pre></div>
<p>Note that there are some subtle (but not really significant) differences between pure Python and <a href="./LibYAML">LibYAML</a> based parsers and emitters.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="dictionaries-without-nested-collections-are-not-dumped-correctly">Dictionaries without nested collections are not dumped correctly</h3>
<p><em>Why does</em></p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> yaml
document <span class="op">=</span> <span class="st">&quot;&quot;&quot;</span>
<span class="st">  a: 1</span>
<span class="st">  b:</span>
<span class="st">    c: 3</span>
<span class="st">    d: 4</span>
<span class="st">&quot;&quot;&quot;</span>
<span class="bu">print</span> yaml.dump(yaml.load(document))</code></pre></div>
<p><em>give</em></p>
<pre><code>a: 1
b: {c: 3, d: 4}</code></pre>
<p><em>(see #18, #24)?</em></p>
<p>It’s a correct output despite the fact that the style of the nested mapping is different.</p>
<p>By default, PyYAML chooses the style of a collection depending on whether it has nested collections. If a collection has nested collections, it will be assigned the block style. Otherwise it will have the flow style.</p>
<p>If you want collections to be always serialized in the block style, set the parameter <code>default_flow_style</code> of <code>dump()</code> to <code>False</code>. For instance,</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> yaml.dump(yaml.load(document), default_flow_style<span class="op">=</span><span class="va">False</span>)
a: <span class="dv">1</span>
b:
  c: <span class="dv">3</span>
  d: <span class="dv">4</span></code></pre></div>
<h2 id="python-3-support">Python 3 support</h2>
<p>Starting from the <em>3.08</em> release, PyYAML and LibYAML bindings provide a complete support for Python 3. This is a short outline of differences in PyYAML API between Python 2 and Python 3 versions.</p>
<p><em>In Python 2:</em></p>
<ul>
<li><code>str</code> objects are converted into <code>!!str</code>, <code>!!python/str</code> or <code>!binary</code> nodes depending on whether the object is an ASCII, UTF-8 or binary string.</li>
<li><code>unicode</code> objects are converted into <code>!!python/unicode</code> or <code>!!str</code> nodes depending on whether the object is an ASCII string or not.</li>
<li><code>yaml.dump(data)</code> produces the document as a UTF-8 encoded <code>str</code> object.</li>
<li><code>yaml.dump(data, encoding=('utf-8'|'utf-16-be'|'utf-16-le'))</code> produces a <code>str</code> object in the specified encoding.</li>
<li><code>yaml.dump(data, encoding=None)</code> produces a <code>unicode</code> object.</li>
</ul>
<p><em>In Python 3:</em></p>
<ul>
<li><code>str</code> objects are converted to <code>!!str</code> nodes.</li>
<li><code>bytes</code> objects are converted to <code>!!binary</code> nodes.</li>
<li>For compatibility reasons, <code>!!python/str</code> and <code>!python/unicode</code> tags are still supported and the corresponding nodes are converted to <code>str</code> objects.</li>
<li><code>yaml.dump(data)</code> produces the document as a <code>str</code> object.</li>
<li><code>yaml.dump(data, encoding=('utf-8'|'utf-16-be'|'utf-16-le'))</code> produces a <code>bytes</code> object in the specified encoding.</li>
</ul>
<h2 id="tutorial">Tutorial</h2>
<p>Start with importing the <code>yaml</code> package.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> yaml</code></pre></div>
<h3 id="loading-yaml">Loading YAML</h3>
<p><strong>Warning: It is not safe to call <code>yaml.load</code> with any data received from an untrusted source! <code>yaml.load</code> is as powerful as <code>pickle.load</code> and so may call any Python function.</strong> Check the <code>yaml.safe_load</code> function though.</p>
<p>The function <code>yaml.load</code> converts a YAML document to a Python object.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> yaml.load(<span class="st">&quot;&quot;&quot;</span>
<span class="st">... - Hesperiidae</span>
<span class="st">... - Papilionidae</span>
<span class="st">... - Apatelodidae</span>
<span class="st">... - Epiplemidae</span>
<span class="st">... &quot;&quot;&quot;</span>)

[<span class="st">'Hesperiidae'</span>, <span class="st">'Papilionidae'</span>, <span class="st">'Apatelodidae'</span>, <span class="st">'Epiplemidae'</span>]</code></pre></div>
<p><code>yaml.load</code> accepts a byte string, a Unicode string, an open binary file object, or an open text file object. A byte string or a file must be encoded with <em>utf-8</em>, <em>utf-16-be</em> or <em>utf-16-le</em> encoding. <code>yaml.load</code> detects the encoding by checking the <em>BOM</em> (byte order mark) sequence at the beginning of the string/file. If no <em>BOM</em> is present, the <em>utf-8</em> encoding is assumed.</p>
<p><code>yaml.load</code> returns a Python object.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> yaml.load(<span class="st">u&quot;&quot;&quot;</span>
<span class="st">... hello: Привет!</span>
<span class="st">... &quot;&quot;&quot;</span>)    <span class="co"># In Python 3, do not use the 'u' prefix</span>

{<span class="st">'hello'</span>: <span class="st">u'\u041f\u0440\u0438\u0432\u0435\u0442!'</span>}

<span class="op">&gt;&gt;&gt;</span> stream <span class="op">=</span> <span class="bu">file</span>(<span class="st">'document.yaml'</span>, <span class="st">'r'</span>)    <span class="co"># 'document.yaml' contains a single YAML document.</span>
<span class="op">&gt;&gt;&gt;</span> yaml.load(stream)
[...]    <span class="co"># A Python object corresponding to the document.</span></code></pre></div>
<p>If a string or a file contains several documents, you may load them all with the <code>yaml.load_all</code> function.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> documents <span class="op">=</span> <span class="st">&quot;&quot;&quot;</span>
<span class="st">... ---</span>
<span class="st">... name: The Set of Gauntlets 'Pauraegen'</span>
<span class="st">... description: &gt;</span>
<span class="st">...     A set of handgear with sparks that crackle</span>
<span class="st">...     across its knuckleguards.</span>
<span class="st">... ---</span>
<span class="st">... name: The Set of Gauntlets 'Paurnen'</span>
<span class="st">... description: &gt;</span>
<span class="st">...   A set of gauntlets that gives off a foul,</span>
<span class="st">...   acrid odour yet remains untarnished.</span>
<span class="st">... ---</span>
<span class="st">... name: The Set of Gauntlets 'Paurnimmen'</span>
<span class="st">... description: &gt;</span>
<span class="st">...   A set of handgear, freezing with unnatural cold.</span>
<span class="st">... &quot;&quot;&quot;</span>

<span class="op">&gt;&gt;&gt;</span> <span class="cf">for</span> data <span class="op">in</span> yaml.load_all(documents):
...     <span class="bu">print</span> data

{<span class="st">'description'</span>: <span class="st">'A set of handgear with sparks that crackle across its knuckleguards.</span><span class="ch">\n</span><span class="st">'</span>,
<span class="co">'name'</span>: <span class="st">&quot;The Set of Gauntlets 'Pauraegen'&quot;</span>}
{<span class="st">'description'</span>: <span class="st">'A set of gauntlets that gives off a foul, acrid odour yet remains untarnished.</span><span class="ch">\n</span><span class="st">'</span>,
<span class="co">'name'</span>: <span class="st">&quot;The Set of Gauntlets 'Paurnen'&quot;</span>}
{<span class="st">'description'</span>: <span class="st">'A set of handgear, freezing with unnatural cold.</span><span class="ch">\n</span><span class="st">'</span>,
<span class="co">'name'</span>: <span class="st">&quot;The Set of Gauntlets 'Paurnimmen'&quot;</span>}</code></pre></div>
<p>PyYAML allows you to construct a Python object of any type.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> yaml.load(<span class="st">&quot;&quot;&quot;</span>
<span class="st">... none: [~, null]</span>
<span class="st">... bool: [true, false, on, off]</span>
<span class="st">... int: 42</span>
<span class="st">... float: 3.14159</span>
<span class="st">... list: [LITE, RES_ACID, SUS_DEXT]</span>
<span class="st">... dict: {hp: 13, sp: 5}</span>
<span class="st">... &quot;&quot;&quot;</span>)

{<span class="st">'none'</span>: [<span class="va">None</span>, <span class="va">None</span>], <span class="st">'int'</span>: <span class="dv">42</span>, <span class="st">'float'</span>: <span class="fl">3.1415899999999999</span>,
<span class="co">'list'</span>: [<span class="st">'LITE'</span>, <span class="st">'RES_ACID'</span>, <span class="st">'SUS_DEXT'</span>], <span class="st">'dict'</span>: {<span class="st">'hp'</span>: <span class="dv">13</span>, <span class="st">'sp'</span>: <span class="dv">5</span>},
<span class="co">'bool'</span>: [<span class="va">True</span>, <span class="va">False</span>, <span class="va">True</span>, <span class="va">False</span>]}</code></pre></div>
<p>Even instances of Python classes can be constructed using the <code>!!python/object</code> tag.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="kw">class</span> Hero:
...     <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, name, hp, sp):
...         <span class="va">self</span>.name <span class="op">=</span> name
...         <span class="va">self</span>.hp <span class="op">=</span> hp
...         <span class="va">self</span>.sp <span class="op">=</span> sp
...     <span class="kw">def</span> <span class="fu">__repr__</span>(<span class="va">self</span>):
...         <span class="cf">return</span> <span class="st">&quot;</span><span class="sc">%s</span><span class="st">(name=</span><span class="sc">%r</span><span class="st">, hp=</span><span class="sc">%r</span><span class="st">, sp=</span><span class="sc">%r</span><span class="st">)&quot;</span> <span class="op">%</span> (
...             <span class="va">self</span>.__class__.<span class="va">__name__</span>, <span class="va">self</span>.name, <span class="va">self</span>.hp, <span class="va">self</span>.sp)

<span class="op">&gt;&gt;&gt;</span> yaml.load(<span class="st">&quot;&quot;&quot;</span>
<span class="st">... !!python/object:__main__.Hero</span>
<span class="st">... name: Welthyr Syxgon</span>
<span class="st">... hp: 1200</span>
<span class="st">... sp: 0</span>
<span class="st">... &quot;&quot;&quot;</span>)

Hero(name<span class="op">=</span><span class="st">'Welthyr Syxgon'</span>, hp<span class="op">=</span><span class="dv">1200</span>, sp<span class="op">=</span><span class="dv">0</span>)</code></pre></div>
<p>Note that the ability to construct an arbitrary Python object may be dangerous if you receive a YAML document from an untrusted source such as the Internet. The function <code>yaml.safe_load</code> limits this ability to simple Python objects like integers or lists.</p>
<p>A python object can be marked as safe and thus be recognized by <code>yaml.safe_load</code>. To do this, derive it from <code>yaml.YAMLObject</code> (as explained in section <em>Constructors, representers, resolvers</em>) and explicitly set its class property <code>yaml_loader</code> to <code>yaml.SafeLoader</code>.</p>
<h3 id="dumping-yaml">Dumping YAML</h3>
<p>The <code>yaml.dump</code> function accepts a Python object and produces a YAML document.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> yaml.dump({<span class="st">'name'</span>: <span class="st">'Silenthand Olleander'</span>, <span class="st">'race'</span>: <span class="st">'Human'</span>,
... <span class="st">'traits'</span>: [<span class="st">'ONE_HAND'</span>, <span class="st">'ONE_EYE'</span>]})

name: Silenthand Olleander
race: Human
traits: [ONE_HAND, ONE_EYE]</code></pre></div>
<p><code>yaml.dump</code> accepts the second optional argument, which must be an open text or binary file. In this case, <code>yaml.dump</code> will write the produced YAML document into the file. Otherwise, <code>yaml.dump</code> returns the produced document.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> stream <span class="op">=</span> <span class="bu">file</span>(<span class="st">'document.yaml'</span>, <span class="st">'w'</span>)
<span class="op">&gt;&gt;&gt;</span> yaml.dump(data, stream)    <span class="co"># Write a YAML representation of data to 'document.yaml'.</span>
<span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> yaml.dump(data)      <span class="co"># Output the document to the screen.</span></code></pre></div>
<p>If you need to dump several YAML documents to a single stream, use the function <code>yaml.dump_all</code>. <code>yaml.dump_all</code> accepts a list or a generator producing</p>
<p>Python objects to be serialized into a YAML document. The second optional argument is an open file.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> yaml.dump([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], explicit_start<span class="op">=</span><span class="va">True</span>)
<span class="op">---</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]

<span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> yaml.dump_all([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], explicit_start<span class="op">=</span><span class="va">True</span>)
<span class="op">---</span> <span class="dv">1</span>
<span class="op">---</span> <span class="dv">2</span>
<span class="op">---</span> <span class="dv">3</span></code></pre></div>
<p>You may even dump instances of Python classes.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="kw">class</span> Hero:
...     <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, name, hp, sp):
...         <span class="va">self</span>.name <span class="op">=</span> name
...         <span class="va">self</span>.hp <span class="op">=</span> hp
...         <span class="va">self</span>.sp <span class="op">=</span> sp
...     <span class="kw">def</span> <span class="fu">__repr__</span>(<span class="va">self</span>):
...         <span class="cf">return</span> <span class="st">&quot;</span><span class="sc">%s</span><span class="st">(name=</span><span class="sc">%r</span><span class="st">, hp=</span><span class="sc">%r</span><span class="st">, sp=</span><span class="sc">%r</span><span class="st">)&quot;</span> <span class="op">%</span> (
...             <span class="va">self</span>.__class__.<span class="va">__name__</span>, <span class="va">self</span>.name, <span class="va">self</span>.hp, <span class="va">self</span>.sp)

<span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> yaml.dump(Hero(<span class="st">&quot;Galain Ysseleg&quot;</span>, hp<span class="op">=-</span><span class="dv">3</span>, sp<span class="op">=</span><span class="dv">2</span>))

<span class="op">!!</span>python<span class="op">/</span><span class="bu">object</span>:__main__.Hero {hp: <span class="op">-</span><span class="dv">3</span>, name: Galain Ysseleg, sp: <span class="dv">2</span>}</code></pre></div>
<p><code>yaml.dump</code> supports a number of keyword arguments that specify formatting details for the emitter. For instance, you may set the preferred intendation and width, use the canonical YAML format or force preferred style for scalars and collections.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> yaml.dump(<span class="bu">range</span>(<span class="dv">50</span>))
[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>, <span class="dv">19</span>, <span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">22</span>,
  <span class="dv">23</span>, <span class="dv">24</span>, <span class="dv">25</span>, <span class="dv">26</span>, <span class="dv">27</span>, <span class="dv">28</span>, <span class="dv">29</span>, <span class="dv">30</span>, <span class="dv">31</span>, <span class="dv">32</span>, <span class="dv">33</span>, <span class="dv">34</span>, <span class="dv">35</span>, <span class="dv">36</span>, <span class="dv">37</span>, <span class="dv">38</span>, <span class="dv">39</span>, <span class="dv">40</span>, <span class="dv">41</span>, <span class="dv">42</span>,
  <span class="dv">43</span>, <span class="dv">44</span>, <span class="dv">45</span>, <span class="dv">46</span>, <span class="dv">47</span>, <span class="dv">48</span>, <span class="dv">49</span>]

<span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> yaml.dump(<span class="bu">range</span>(<span class="dv">50</span>), width<span class="op">=</span><span class="dv">50</span>, indent<span class="op">=</span><span class="dv">4</span>)
[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">15</span>,
    <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>, <span class="dv">19</span>, <span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">22</span>, <span class="dv">23</span>, <span class="dv">24</span>, <span class="dv">25</span>, <span class="dv">26</span>, <span class="dv">27</span>,
    <span class="dv">28</span>, <span class="dv">29</span>, <span class="dv">30</span>, <span class="dv">31</span>, <span class="dv">32</span>, <span class="dv">33</span>, <span class="dv">34</span>, <span class="dv">35</span>, <span class="dv">36</span>, <span class="dv">37</span>, <span class="dv">38</span>, <span class="dv">39</span>,
    <span class="dv">40</span>, <span class="dv">41</span>, <span class="dv">42</span>, <span class="dv">43</span>, <span class="dv">44</span>, <span class="dv">45</span>, <span class="dv">46</span>, <span class="dv">47</span>, <span class="dv">48</span>, <span class="dv">49</span>]

<span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> yaml.dump(<span class="bu">range</span>(<span class="dv">5</span>), canonical<span class="op">=</span><span class="va">True</span>)
<span class="op">---</span>
<span class="op">!!</span>seq [
  <span class="op">!!</span><span class="bu">int</span> <span class="st">&quot;0&quot;</span>,
  <span class="op">!!</span><span class="bu">int</span> <span class="st">&quot;1&quot;</span>,
  <span class="op">!!</span><span class="bu">int</span> <span class="st">&quot;2&quot;</span>,
  <span class="op">!!</span><span class="bu">int</span> <span class="st">&quot;3&quot;</span>,
  <span class="op">!!</span><span class="bu">int</span> <span class="st">&quot;4&quot;</span>,
]

<span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> yaml.dump(<span class="bu">range</span>(<span class="dv">5</span>), default_flow_style<span class="op">=</span><span class="va">False</span>)
<span class="op">-</span> <span class="dv">0</span>
<span class="op">-</span> <span class="dv">1</span>
<span class="op">-</span> <span class="dv">2</span>
<span class="op">-</span> <span class="dv">3</span>
<span class="op">-</span> <span class="dv">4</span>

<span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> yaml.dump(<span class="bu">range</span>(<span class="dv">5</span>), default_flow_style<span class="op">=</span><span class="va">True</span>, default_style<span class="op">=</span><span class="st">'&quot;'</span>)
[<span class="op">!!</span><span class="bu">int</span> <span class="st">&quot;0&quot;</span>, <span class="op">!!</span><span class="bu">int</span> <span class="st">&quot;1&quot;</span>, <span class="op">!!</span><span class="bu">int</span> <span class="st">&quot;2&quot;</span>, <span class="op">!!</span><span class="bu">int</span> <span class="st">&quot;3&quot;</span>, <span class="op">!!</span><span class="bu">int</span> <span class="st">&quot;4&quot;</span>]</code></pre></div>
<h3 id="constructors-representers-resolvers">Constructors, representers, resolvers</h3>
<p>You may define your own application-specific tags. The easiest way to do it is to define a subclass of <code>yaml.YAMLObject</code>:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="kw">class</span> Monster(yaml.YAMLObject):
...     yaml_tag <span class="op">=</span> <span class="st">u'!Monster'</span>
...     <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, name, hp, ac, attacks):
...         <span class="va">self</span>.name <span class="op">=</span> name
...         <span class="va">self</span>.hp <span class="op">=</span> hp
...         <span class="va">self</span>.ac <span class="op">=</span> ac
...         <span class="va">self</span>.attacks <span class="op">=</span> attacks
...     <span class="kw">def</span> <span class="fu">__repr__</span>(<span class="va">self</span>):
...         <span class="cf">return</span> <span class="st">&quot;</span><span class="sc">%s</span><span class="st">(name=</span><span class="sc">%r</span><span class="st">, hp=</span><span class="sc">%r</span><span class="st">, ac=</span><span class="sc">%r</span><span class="st">, attacks=</span><span class="sc">%r</span><span class="st">)&quot;</span> <span class="op">%</span> (
...             <span class="va">self</span>.__class__.<span class="va">__name__</span>, <span class="va">self</span>.name, <span class="va">self</span>.hp, <span class="va">self</span>.ac, <span class="va">self</span>.attacks)</code></pre></div>
<p>The above definition is enough to automatically load and dump <code>Monster</code> objects:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> yaml.load(<span class="st">&quot;&quot;&quot;</span>
<span class="st">... --- !Monster</span>
<span class="st">... name: Cave spider</span>
<span class="st">... hp: [2,6]    # 2d6</span>
<span class="st">... ac: 16</span>
<span class="st">... attacks: [BITE, HURT]</span>
<span class="st">... &quot;&quot;&quot;</span>)

Monster(name<span class="op">=</span><span class="st">'Cave spider'</span>, hp<span class="op">=</span>[<span class="dv">2</span>, <span class="dv">6</span>], ac<span class="op">=</span><span class="dv">16</span>, attacks<span class="op">=</span>[<span class="st">'BITE'</span>, <span class="st">'HURT'</span>])

<span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> yaml.dump(Monster(
...     name<span class="op">=</span><span class="st">'Cave lizard'</span>, hp<span class="op">=</span>[<span class="dv">3</span>,<span class="dv">6</span>], ac<span class="op">=</span><span class="dv">16</span>, attacks<span class="op">=</span>[<span class="st">'BITE'</span>,<span class="st">'HURT'</span>]))

<span class="op">!</span>Monster
ac: <span class="dv">16</span>
attacks: [BITE, HURT]
hp: [<span class="dv">3</span>, <span class="dv">6</span>]
name: Cave lizard</code></pre></div>
<p><code>yaml.YAMLObject</code> uses metaclass magic to register a constructor, which transforms a YAML node to a class instance, and a representer, which serializes a class instance to a YAML node.</p>
<p>If you don’t want to use metaclasses, you may register your constructors and representers using the functions <code>yaml.add_constructor</code> and <code>yaml.add_representer</code>. For instance, you may want to add a constructor and a representer for the following <code>Dice</code> class:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="kw">class</span> Dice(<span class="bu">tuple</span>):
...     <span class="kw">def</span> <span class="fu">__new__</span>(cls, a, b):
...         <span class="cf">return</span> <span class="bu">tuple</span>.<span class="fu">__new__</span>(cls, [a, b])
...     <span class="kw">def</span> <span class="fu">__repr__</span>(<span class="va">self</span>):
...         <span class="cf">return</span> <span class="st">&quot;Dice(</span><span class="sc">%s</span><span class="st">,</span><span class="sc">%s</span><span class="st">)&quot;</span> <span class="op">%</span> <span class="va">self</span>

<span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> Dice(<span class="dv">3</span>,<span class="dv">6</span>)
Dice(<span class="dv">3</span>,<span class="dv">6</span>)</code></pre></div>
<p>The default representation for <code>Dice</code> objects is not pretty:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> yaml.dump(Dice(<span class="dv">3</span>,<span class="dv">6</span>))

<span class="op">!!</span>python<span class="op">/</span><span class="bu">object</span><span class="op">/</span>new:__main__.Dice
<span class="op">-</span> <span class="op">!!</span>python<span class="op">/</span><span class="bu">tuple</span> [<span class="dv">3</span>, <span class="dv">6</span>]</code></pre></div>
<p>Suppose you want a <code>Dice</code> object to represented as <code>AdB</code> in YAML:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> yaml.dump(Dice(<span class="dv">3</span>,<span class="dv">6</span>))

3d6</code></pre></div>
<p>First we define a representer that converts a dice object to a scalar node with the tag <code>!dice</code>, then we register it.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="kw">def</span> dice_representer(dumper, data):
...     <span class="cf">return</span> dumper.represent_scalar(<span class="st">u'!dice'</span>, <span class="st">u'</span><span class="sc">%s</span><span class="st">d</span><span class="sc">%s</span><span class="st">'</span> <span class="op">%</span> data)

<span class="op">&gt;&gt;&gt;</span> yaml.add_representer(Dice, dice_representer)</code></pre></div>
<p>Now you may dump an instance of the <code>Dice</code> object:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> yaml.dump({<span class="st">'gold'</span>: Dice(<span class="dv">10</span>,<span class="dv">6</span>)})
{gold: <span class="op">!</span>dice <span class="st">'10d6'</span>}</code></pre></div>
<p>Let us add the code to construct a Dice object:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="kw">def</span> dice_constructor(loader, node):
...     value <span class="op">=</span> loader.construct_scalar(node)
...     a, b <span class="op">=</span> <span class="bu">map</span>(<span class="bu">int</span>, value.split(<span class="st">'d'</span>))
...     <span class="cf">return</span> Dice(a, b)

<span class="op">&gt;&gt;&gt;</span> yaml.add_constructor(<span class="st">u'!dice'</span>, dice_constructor)</code></pre></div>
<p>Then you may load a <code>Dice</code> object as well:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> yaml.load(<span class="st">&quot;&quot;&quot;</span>
<span class="st">... initial hit points: !dice 8d4</span>
<span class="st">... &quot;&quot;&quot;</span>)

{<span class="st">'initial hit points'</span>: Dice(<span class="dv">8</span>,<span class="dv">4</span>)}</code></pre></div>
<p>You might not want to specify the tag <code>!dice</code> everywhere. There is a way to teach PyYAML that any untagged plain scalar which looks like XdY has the implicit tag <code>!dice</code>. Use <code>add_implicit_resolver</code>:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> re
<span class="op">&gt;&gt;&gt;</span> pattern <span class="op">=</span> re.<span class="bu">compile</span>(<span class="vs">r'^\d+d\d+$'</span>)
<span class="op">&gt;&gt;&gt;</span> yaml.add_implicit_resolver(<span class="st">u'!dice'</span>, pattern)</code></pre></div>
<p>Now you don’t have to specify the tag to define a <code>Dice</code> object:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> yaml.dump({<span class="st">'treasure'</span>: Dice(<span class="dv">10</span>,<span class="dv">20</span>)})

{treasure: 10d20}

<span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> yaml.load(<span class="st">&quot;&quot;&quot;</span>
<span class="st">... damage: 5d10</span>
<span class="st">... &quot;&quot;&quot;</span>)

{<span class="st">'damage'</span>: Dice(<span class="dv">5</span>,<span class="dv">10</span>)}</code></pre></div>
<h2 id="yaml-syntax">YAML syntax</h2>
<p>A good introduction to the YAML syntax is <a href="http://yaml.org/spec/1.1/#id857168">Chapter 2 of the YAML specification</a>.</p>
<p>You may also check <a href="http://yaml4r.sourceforge.net/cookbook/">the YAML cookbook</a>. Note that it is focused on a Ruby implementation and uses the old YAML 1.0 syntax.</p>
<p>Here we present most common YAML constructs together with the corresponding Python objects.</p>
<h3 id="documents">Documents</h3>
<p>YAML stream is a collection of zero or more documents. An empty stream contains no documents. Documents are separated with <code>---</code>. Documents may optionally end with <code>...</code>. A single document may or may not be marked with <code>---</code>.</p>
<p>Example of an implicit document:</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="kw">-</span> Multimedia
<span class="kw">-</span> Internet
<span class="kw">-</span> Education</code></pre></div>
<p>Example of an explicit document:</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="ot">---</span>
<span class="kw">-</span> Afterstep
<span class="kw">-</span> CTWM
<span class="kw">-</span> Oroborus
<span class="co">...</span></code></pre></div>
<p>Example of several documents in the same stream:</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="ot">---</span>
<span class="kw">-</span> Ada
<span class="kw">-</span> APL
<span class="kw">-</span> ASP

<span class="kw">-</span> Assembly
<span class="kw">-</span> Awk
<span class="ot">---</span>
<span class="kw">-</span> Basic
<span class="ot">---</span>
<span class="kw">-</span> C
<span class="kw">-</span> C<span class="co">#    # Note that comments are denoted with ' #' (space then #).</span>
<span class="kw">-</span> C++
<span class="kw">-</span> Cold Fusion</code></pre></div>
<h3 id="block-sequences">Block sequences</h3>
<p>In the block context, sequence entries are denoted by <code>-</code> (dash then space):</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="co"># YAML</span>
<span class="kw">-</span> The Dagger <span class="st">'Narthanc'</span>
<span class="kw">-</span> The Dagger <span class="st">'Nimthanc'</span>
<span class="kw">-</span> The Dagger <span class="st">'Dethanc'</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># Python</span>
[<span class="st">&quot;The Dagger 'Narthanc'&quot;</span>, <span class="st">&quot;The Dagger 'Nimthanc'&quot;</span>, <span class="st">&quot;The Dagger 'Dethanc'&quot;</span>]</code></pre></div>
<p>Block sequences can be nested:</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="co"># YAML</span>
<span class="kw">-</span>
  <span class="kw">-</span> HTML
  <span class="kw">-</span> LaTeX
  <span class="kw">-</span> SGML
  <span class="kw">-</span> VRML
  <span class="kw">-</span> XML
  <span class="kw">-</span> YAML
<span class="kw">-</span>
  <span class="kw">-</span> BSD
  <span class="kw">-</span> GNU Hurd
  <span class="kw">-</span> Linux</code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># Python</span>
[[<span class="st">'HTML'</span>, <span class="st">'LaTeX'</span>, <span class="st">'SGML'</span>, <span class="st">'VRML'</span>, <span class="st">'XML'</span>, <span class="st">'YAML'</span>], [<span class="st">'BSD'</span>, <span class="st">'GNU Hurd'</span>, <span class="st">'Linux'</span>]]</code></pre></div>
<p>It’s not necessary to start a nested sequence with a new line:</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="co"># YAML</span>
<span class="kw">-</span> 1.1
<span class="kw">-</span> - 2.1
  <span class="kw">-</span> 2.2
<span class="kw">-</span> - - 3.1
    <span class="kw">-</span> 3.2
    <span class="kw">-</span> 3.3</code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># Python</span>
[<span class="fl">1.1</span>, [<span class="fl">2.1</span>, <span class="fl">2.2</span>], [[<span class="fl">3.1</span>, <span class="fl">3.2</span>, <span class="fl">3.3</span>]]]</code></pre></div>
<p>A block sequence may be nested to a block mapping. Note that in this case it is not necessary to indent the sequence.</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="co"># YAML</span>
<span class="fu">left hand:</span>
<span class="kw">-</span> Ring of Teleportation
<span class="kw">-</span> Ring of Speed

<span class="fu">right hand:</span>
<span class="kw">-</span> Ring of Resist Fire
<span class="kw">-</span> Ring of Resist Cold
<span class="kw">-</span> Ring of Resist Poison</code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># Python</span>
{<span class="st">'right hand'</span>: [<span class="st">'Ring of Resist Fire'</span>, <span class="st">'Ring of Resist Cold'</span>, <span class="st">'Ring of Resist Poison'</span>],
<span class="co">'left hand'</span>: [<span class="st">'Ring of Teleportation'</span>, <span class="st">'Ring of Speed'</span>]}</code></pre></div>
<h3 id="block-mappings">Block mappings</h3>
<p>In the block context, keys and values of mappings are separated by <code>:</code> (colon then space):</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="co"># YAML</span>
<span class="fu">base armor class:</span> 0
<span class="fu">base damage:</span> <span class="kw">[</span>4<span class="kw">,</span>4<span class="kw">]</span>
<span class="fu">plus to-hit:</span> 12
<span class="fu">plus to-dam:</span> 16
<span class="fu">plus to-ac:</span> 0</code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># Python</span>
{<span class="st">'plus to-hit'</span>: <span class="dv">12</span>, <span class="st">'base damage'</span>: [<span class="dv">4</span>, <span class="dv">4</span>], <span class="st">'base armor class'</span>: <span class="dv">0</span>, <span class="st">'plus to-ac'</span>: <span class="dv">0</span>, <span class="st">'plus to-dam'</span>: <span class="dv">16</span>}</code></pre></div>
<p>Complex keys are denoted with <code>?</code> (question mark then space):</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="co"># YAML</span>
? !!python/tuple <span class="kw">[</span>0<span class="kw">,</span>0<span class="kw">]</span>
: The Hero
? !!python/tuple <span class="kw">[</span>0<span class="kw">,</span>1<span class="kw">]</span>
: Treasure
? !!python/tuple <span class="kw">[</span>1<span class="kw">,</span>0<span class="kw">]</span>
: Treasure
? !!python/tuple <span class="kw">[</span>1<span class="kw">,</span>1<span class="kw">]</span>
: The Dragon</code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># Python</span>
{(<span class="dv">0</span>, <span class="dv">1</span>): <span class="st">'Treasure'</span>, (<span class="dv">1</span>, <span class="dv">0</span>): <span class="st">'Treasure'</span>, (<span class="dv">0</span>, <span class="dv">0</span>): <span class="st">'The Hero'</span>, (<span class="dv">1</span>, <span class="dv">1</span>): <span class="st">'The Dragon'</span>}</code></pre></div>
<p>Block mapping can be nested:</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="co"># YAML</span>
<span class="fu">hero:</span>
  <span class="fu">hp:</span> 34
  <span class="fu">sp:</span> 8
  <span class="fu">level:</span> 4
<span class="fu">orc:</span>
  <span class="fu">hp:</span> 12
  <span class="fu">sp:</span> 0
  <span class="fu">level:</span> 2</code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># Python</span>
{<span class="st">'hero'</span>: {<span class="st">'hp'</span>: <span class="dv">34</span>, <span class="st">'sp'</span>: <span class="dv">8</span>, <span class="st">'level'</span>: <span class="dv">4</span>}, <span class="st">'orc'</span>: {<span class="st">'hp'</span>: <span class="dv">12</span>, <span class="st">'sp'</span>: <span class="dv">0</span>, <span class="st">'level'</span>: <span class="dv">2</span>}}</code></pre></div>
<p>A block mapping may be nested in a block sequence:</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="co"># YAML</span>
<span class="kw">-</span> <span class="fu">name:</span> PyYAML
  <span class="fu">status:</span> 4
  <span class="fu">license:</span> MIT
  <span class="fu">language:</span> Python
<span class="kw">-</span> <span class="fu">name:</span> PySyck
  <span class="fu">status:</span> 5
  <span class="fu">license:</span> BSD
  <span class="fu">language:</span> Python</code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># Python</span>
[{<span class="st">'status'</span>: <span class="dv">4</span>, <span class="st">'language'</span>: <span class="st">'Python'</span>, <span class="st">'name'</span>: <span class="st">'PyYAML'</span>, <span class="st">'license'</span>: <span class="st">'MIT'</span>},
{<span class="st">'status'</span>: <span class="dv">5</span>, <span class="st">'license'</span>: <span class="st">'BSD'</span>, <span class="st">'name'</span>: <span class="st">'PySyck'</span>, <span class="st">'language'</span>: <span class="st">'Python'</span>}]</code></pre></div>
<h3 id="flow-collections">Flow collections</h3>
<p>The syntax of flow collections in YAML is very close to the syntax of list and dictionary constructors in Python:</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="co"># YAML</span>
<span class="kw">{</span> <span class="fu">str:</span> <span class="kw">[</span><span class="fu">15, 17], con:</span> <span class="kw">[</span><span class="fu">16, 16], dex:</span> <span class="kw">[</span><span class="fu">17, 18], wis:</span> <span class="kw">[</span><span class="fu">16, 16], int:</span> <span class="kw">[</span><span class="fu">10, 13], chr:</span> <span class="kw">[</span>5<span class="kw">,</span> 8<span class="kw">]</span> }</code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># Python</span>
{<span class="st">'dex'</span>: [<span class="dv">17</span>, <span class="dv">18</span>], <span class="st">'int'</span>: [<span class="dv">10</span>, <span class="dv">13</span>], <span class="st">'chr'</span>: [<span class="dv">5</span>, <span class="dv">8</span>], <span class="st">'wis'</span>: [<span class="dv">16</span>, <span class="dv">16</span>], <span class="st">'str'</span>: [<span class="dv">15</span>, <span class="dv">17</span>], <span class="st">'con'</span>: [<span class="dv">16</span>, <span class="dv">16</span>]}</code></pre></div>
<h3 id="scalars">Scalars</h3>
<p>There are 5 styles of scalars in YAML: plain, single-quoted, double-quoted, literal, and folded:</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="co"># YAML</span>
<span class="fu">plain:</span> Scroll of Remove Curse
<span class="fu">single-quoted:</span> <span class="st">'EASY_KNOW'</span>
<span class="fu">double-quoted:</span> <span class="st">&quot;?&quot;</span>
<span class="fu">literal:</span> |    <span class="co"># Borrowed from http://www.kersbergen.com/flump/religion.html</span>
  by hjw              ___
     __              /.-.\
    /  )_____________\\  Y
   /_ /=== == === === =\ _\_
  ( /)=== == === === == Y   \
   `-------------------(  o  )
                        \___/
<span class="fu">folded:</span> &gt;
  It removes all ordinary curses from all equipped items.
  Heavy or permanent curses are unaffected.</code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># Python</span>
{<span class="st">'plain'</span>: <span class="st">'Scroll of Remove Curse'</span>,
<span class="co">'literal'</span>:
    <span class="co">'by hjw              ___\n'</span>
    <span class="co">'   __              /.-.\\\n'</span>
    <span class="co">'  /  )_____________\\\\  Y\n'</span>
    <span class="co">' /_ /=== == === === =\\ _\\_\n'</span>
    <span class="co">'( /)=== == === === == Y   \\\n'</span>
    <span class="co">' `-------------------(  o  )\n'</span>
    <span class="co">'                      \\___/\n'</span>,
<span class="co">'single-quoted'</span>: <span class="st">'EASY_KNOW'</span>,
<span class="co">'double-quoted'</span>: <span class="st">'?'</span>,
<span class="co">'folded'</span>: <span class="st">'It removes all ordinary curses from all equipped items. Heavy or permanent curses are unaffected.</span><span class="ch">\n</span><span class="st">'</span>}</code></pre></div>
<p>Each style has its own quirks. A plain scalar does not use indicators to denote its start and end, therefore it’s the most restricted style. Its natural applications are names of attributes and parameters.</p>
<p>Using single-quoted scalars, you may express any value that does not contain special characters. No escaping occurs for single quoted scalars except that a pair of adjacent quotes <code>''</code> is replaced with a lone single quote <code>'</code>.</p>
<p>Double-quoted is the most powerful style and the only style that can express any scalar value. Double-quoted scalars allow <em>escaping</em>. Using escaping sequences <code>\x*</code> and <code>\u***</code>, you may express any ASCII or Unicode character.</p>
<p>There are two kind of block scalar styles: <em>literal</em> and <em>folded</em>. The literal style is the most suitable style for large block of text such as source code. The folded style is similar to the literal style, but two adjacent non-empty lines are joined to a single line separated by a space character.</p>
<h3 id="aliases">Aliases</h3>
<p><del><em>Note that PyYAML does not yet support recursive objects.</em></del></p>
<p>Using YAML you may represent objects of arbitrary graph-like structures. If you want to refer to the same object from different parts of a document, you need to use anchors and aliases.</p>
<p>Anchors are denoted by the <code>&amp;</code> indicator while aliases are denoted by ``. For instance, the document</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="fu">left hand:</span> <span class="dt">&amp;A</span>
  <span class="fu">name:</span> The Bastard Sword of Eowyn
  <span class="fu">weight:</span> 30
<span class="fu">right hand:</span> <span class="dt">*A</span></code></pre></div>
<p>expresses the idea of a hero holding a heavy sword in both hands.</p>
<p>PyYAML now fully supports recursive objects. For instance, the document</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="dt">&amp;A</span> <span class="kw">[</span> <span class="dt">*A</span> <span class="kw">]</span></code></pre></div>
<p>will produce a list object containing a reference to itself.</p>
<h3 id="tags">Tags</h3>
<p>Tags are used to denote the type of a YAML node. Standard YAML tags are defined at <a href="http://yaml.org/type/index.html" class="uri">http://yaml.org/type/index.html</a>.</p>
<p>Tags may be implicit:</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="fu">boolean:</span> true
<span class="fu">integer:</span> 3
<span class="fu">float:</span> 3.14</code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">{<span class="st">'boolean'</span>: <span class="va">True</span>, <span class="st">'integer'</span>: <span class="dv">3</span>, <span class="st">'float'</span>: <span class="fl">3.14</span>}</code></pre></div>
<p>or explicit:</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="fu">boolean:</span> <span class="dt">!!bool</span> <span class="st">&quot;true&quot;</span>
<span class="fu">integer:</span> <span class="dt">!!int</span> <span class="st">&quot;3&quot;</span>
<span class="fu">float:</span> <span class="dt">!!float</span> <span class="st">&quot;3.14&quot;</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">{<span class="st">'boolean'</span>: <span class="va">True</span>, <span class="st">'integer'</span>: <span class="dv">3</span>, <span class="st">'float'</span>: <span class="fl">3.14</span>}</code></pre></div>
<p>Plain scalars without explicitly defined tags are subject to implicit tag resolution. The scalar value is checked against a set of regular expressions and if one of them matches, the corresponding tag is assigned to the scalar. PyYAML allows an application to add custom implicit tag resolvers.</p>
<h2 id="yaml-tags-and-python-types">YAML tags and Python types</h2>
<p>The following table describes how nodes with different tags are converted to Python objects.</p>
<table>
<thead>
<tr class="header">
<th align="left"><em>YAML tag</em></th>
<th align="left"><em>Python type</em></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><em>Standard YAML tags</em></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><code>!!null</code></td>
<td align="left"><code>None</code></td>
</tr>
<tr class="odd">
<td align="left"><code>!!bool</code></td>
<td align="left"><code>bool</code></td>
</tr>
<tr class="even">
<td align="left"><code>!!int</code></td>
<td align="left"><code>int</code> or <code>long</code> (<code>int</code> in Python 3)</td>
</tr>
<tr class="odd">
<td align="left"><code>!!float</code></td>
<td align="left"><code>float</code></td>
</tr>
<tr class="even">
<td align="left"><code>!!binary</code></td>
<td align="left"><code>str</code> (<code>bytes</code> in Python 3)</td>
</tr>
<tr class="odd">
<td align="left"><code>!!timestamp</code></td>
<td align="left"><code>datetime.datetime</code></td>
</tr>
<tr class="even">
<td align="left"><code>!!omap</code>, <code>!!pairs</code></td>
<td align="left"><code>list</code> of pairs</td>
</tr>
<tr class="odd">
<td align="left"><code>!!set</code></td>
<td align="left"><code>set</code></td>
</tr>
<tr class="even">
<td align="left"><code>!!str</code></td>
<td align="left"><code>str</code> or <code>unicode</code> (<code>str</code> in Python 3)</td>
</tr>
<tr class="odd">
<td align="left"><code>!!seq</code></td>
<td align="left"><code>list</code></td>
</tr>
<tr class="even">
<td align="left"><code>!!map</code></td>
<td align="left"><code>dict</code></td>
</tr>
<tr class="odd">
<td align="left"><em>Python-specific tags</em></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><code>!!python/none</code></td>
<td align="left"><code>None</code></td>
</tr>
<tr class="odd">
<td align="left"><code>!!python/bool</code></td>
<td align="left"><code>bool</code></td>
</tr>
<tr class="even">
<td align="left"><code>!!python/bytes</code></td>
<td align="left">(<code>bytes</code> in Python 3)</td>
</tr>
<tr class="odd">
<td align="left"><code>!!python/str</code></td>
<td align="left"><code>str</code> (<code>str</code> in Python 3)</td>
</tr>
<tr class="even">
<td align="left"><code>!!python/unicode</code></td>
<td align="left"><code>unicode</code> (<code>str</code> in Python 3)</td>
</tr>
<tr class="odd">
<td align="left"><code>!!python/int</code></td>
<td align="left"><code>int</code></td>
</tr>
<tr class="even">
<td align="left"><code>!!python/long</code></td>
<td align="left"><code>long</code> (<code>int</code> in Python 3)</td>
</tr>
<tr class="odd">
<td align="left"><code>!!python/float</code></td>
<td align="left"><code>float</code></td>
</tr>
<tr class="even">
<td align="left"><code>!!python/complex</code></td>
<td align="left"><code>complex</code></td>
</tr>
<tr class="odd">
<td align="left"><code>!!python/list</code></td>
<td align="left"><code>list</code></td>
</tr>
<tr class="even">
<td align="left"><code>!!python/tuple</code></td>
<td align="left"><code>tuple</code></td>
</tr>
<tr class="odd">
<td align="left"><code>!!python/dict</code></td>
<td align="left"><code>dict</code></td>
</tr>
<tr class="even">
<td align="left"><em>Complex Python tags</em></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><code>!!python/name:module.name</code></td>
<td align="left"><code>module.name</code></td>
</tr>
<tr class="even">
<td align="left"><code>!!python/module:package.module</code></td>
<td align="left"><code>package.module</code></td>
</tr>
<tr class="odd">
<td align="left"><code>!!python/object:module.cls</code></td>
<td align="left"><code>module.cls</code> instance</td>
</tr>
<tr class="even">
<td align="left"><code>!!python/object/new:module.cls</code></td>
<td align="left"><code>module.cls</code> instance</td>
</tr>
<tr class="odd">
<td align="left"><code>!!python/object/apply:module.f</code></td>
<td align="left">value of <code>f(...)</code></td>
</tr>
</tbody>
</table>
<h3 id="string-conversion-python-2-only">String conversion (Python 2 only)</h3>
<p>There are four tags that are converted to <code>str</code> and <code>unicode</code> values: <code>!!str</code>, <code>!!binary</code>, <code>!!python/str</code>, and <code>!!python/unicode</code>.</p>
<p><code>!!str</code>-tagged scalars are converted to <code>str</code> objects if its value is <em>ASCII</em>. Otherwise it is converted to <code>unicode</code>. <code>!!binary</code>-tagged scalars are converted to <code>str</code> objects with its value decoded using the <em>base64</em> encoding. <code>!!python/str</code> scalars are converted to <code>str</code> objects encoded with <em>utf-8</em> encoding. <code>!!python/unicode</code> scalars are converted to <code>unicode</code> objects.</p>
<p>Conversely, a <code>str</code> object is converted to 1. a <code>!!str</code> scalar if its value is <em>ASCII</em>. 2. a <code>!!python/str</code> scalar if its value is a correct <em>utf-8</em> sequence. 3. a <code>!!binary</code> scalar otherwise.</p>
<p>A <code>unicode</code> object is converted to 1. a <code>!!python/unicode</code> scalar if its value is <em>ASCII</em>. 2. a <code>!!str</code> scalar otherwise.</p>
<h3 id="string-conversion-python-3-only">String conversion (Python 3 only)</h3>
<p>In Python 3, <code>str</code> objects are converted to <code>!!str</code> scalars and <code>bytes</code> objects to <code>!!binary</code> scalars. For compatibility reasons, tags <code>!!python/str</code> and <code>!!python/unicode</code> are still supported and converted to <code>str</code> objects.</p>
<h3 id="names-and-modules">Names and modules</h3>
<p>In order to represent static Python objects like functions or classes, you need to use a complex <code>!!python/name</code> tag. For instance, the function <code>yaml.dump</code> can be represented as</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="dt">!!python/name:yaml.dump</span></code></pre></div>
<p>Similarly, modules are represented using the tag <code>!python/module</code>:</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="dt">!!python/module:yaml</span></code></pre></div>
<h3 id="objects">Objects</h3>
<p>Any pickleable object can be serialized using the <code>!!python/object</code> tag:</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="dt">!!python/object:module.Class</span> <span class="kw">{</span> <span class="fu">attribute:</span> value<span class="kw">,</span> ... <span class="kw">}</span></code></pre></div>
<p>In order to support the pickle protocol, two additional forms of the <code>!!python/object</code> tag are provided:</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="dt">!!python/object/new:module.Class</span>
<span class="fu">args:</span> <span class="kw">[</span>argument<span class="kw">,</span> ...<span class="kw">]</span>
<span class="fu">kwds:</span> <span class="kw">{</span><span class="fu">key:</span> value<span class="kw">,</span> ...<span class="kw">}</span>
<span class="fu">state:</span> ...
<span class="fu">listitems:</span> <span class="kw">[</span>item<span class="kw">,</span> ...<span class="kw">]</span>
<span class="fu">dictitems:</span> <span class="kw">[</span><span class="fu">key:</span> value, ...]

<span class="fu">!!python/object/apply:</span>module.function
<span class="fu">args:</span> <span class="kw">[</span>argument<span class="kw">,</span> ...<span class="kw">]</span>
<span class="fu">kwds:</span> <span class="kw">{</span><span class="fu">key:</span> value<span class="kw">,</span> ...<span class="kw">}</span>
<span class="fu">state:</span> ...
<span class="fu">listitems:</span> <span class="kw">[</span>item<span class="kw">,</span> ...<span class="kw">]</span>
<span class="fu">dictitems:</span> <span class="kw">[</span><span class="fu">key:</span> value, ...]</code></pre></div>
<p>If only the <code>args</code> field is non-empty, the above records can be shortened:</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="dt">!!python/object/new:module.Class</span> <span class="kw">[</span>argument<span class="kw">,</span> ...<span class="kw">]</span>

<span class="dt">!!python/object/apply:module.function</span> <span class="kw">[</span>argument<span class="kw">,</span> ...<span class="kw">]</span></code></pre></div>
<h2 id="reference">Reference</h2>
<p><em>Warning: API stability is not guaranteed!</em></p>
<h3 id="the-yaml-package">The yaml package</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">scan(stream, Loader<span class="op">=</span>Loader)</code></pre></div>
<p><code>scan(stream)</code> scans the given <code>stream</code> and produces a sequence of tokens.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">parse(stream, Loader<span class="op">=</span>Loader)

emit(events, stream<span class="op">=</span><span class="va">None</span>, Dumper<span class="op">=</span>Dumper,
    canonical<span class="op">=</span><span class="va">None</span>,
    indent<span class="op">=</span><span class="va">None</span>,
    width<span class="op">=</span><span class="va">None</span>,
    allow_unicode<span class="op">=</span><span class="va">None</span>,
    line_break<span class="op">=</span><span class="va">None</span>)</code></pre></div>
<p><code>parse(stream)</code> parses the given <code>stream</code> and produces a sequence of parsing events.</p>
<p><code>emit(events, stream=None)</code> serializes the given sequence of parsing <code>events</code> and writes them to the <code>stream</code>. if <code>stream</code> is <code>None</code>, it returns the produced stream.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">compose(stream, Loader<span class="op">=</span>Loader)
compose_all(stream, Loader<span class="op">=</span>Loader)

serialize(node, stream<span class="op">=</span><span class="va">None</span>, Dumper<span class="op">=</span>Dumper,
    encoding<span class="op">=</span><span class="st">'utf-8'</span>, <span class="co"># encoding=None (Python 3)</span>
    explicit_start<span class="op">=</span><span class="va">None</span>,
    explicit_end<span class="op">=</span><span class="va">None</span>,
    version<span class="op">=</span><span class="va">None</span>,
    tags<span class="op">=</span><span class="va">None</span>,
    canonical<span class="op">=</span><span class="va">None</span>,
    indent<span class="op">=</span><span class="va">None</span>,
    width<span class="op">=</span><span class="va">None</span>,
    allow_unicode<span class="op">=</span><span class="va">None</span>,
    line_break<span class="op">=</span><span class="va">None</span>)
serialize_all(nodes, stream<span class="op">=</span><span class="va">None</span>, Dumper<span class="op">=</span>Dumper, ...)</code></pre></div>
<p><code>compose(stream)</code> parses the given <code>stream</code> and returns the root of the representation graph for the first document in the stream. If there are no documents in the stream, it returns <code>None</code>.</p>
<p><code>compose_all(stream)</code> parses the given <code>stream</code> and returns a sequence of representation graphs corresponding to the documents in the stream.</p>
<p><code>serialize(node, stream=None)</code> serializes the given representation graph into the <code>stream</code>. If <code>stream</code> is <code>None</code>, it returns the produced stream.</p>
<p><code>serialize_all(node, stream=None)</code> serializes the given sequence of representation graphs into the given <code>stream</code>. If <code>stream</code> is <code>None</code>, it returns the produced stream.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">load(stream, Loader<span class="op">=</span>Loader)
load_all(stream, Loader<span class="op">=</span>Loader)

safe_load(stream)
safe_load_all(stream)

dump(data, stream<span class="op">=</span><span class="va">None</span>, Dumper<span class="op">=</span>Dumper,
    default_style<span class="op">=</span><span class="va">None</span>,
    default_flow_style<span class="op">=</span><span class="va">None</span>,
    encoding<span class="op">=</span><span class="st">'utf-8'</span>, <span class="co"># encoding=None (Python 3)</span>
    explicit_start<span class="op">=</span><span class="va">None</span>,
    explicit_end<span class="op">=</span><span class="va">None</span>,
    version<span class="op">=</span><span class="va">None</span>,
    tags<span class="op">=</span><span class="va">None</span>,
    canonical<span class="op">=</span><span class="va">None</span>,
    indent<span class="op">=</span><span class="va">None</span>,
    width<span class="op">=</span><span class="va">None</span>,
    allow_unicode<span class="op">=</span><span class="va">None</span>,
    line_break<span class="op">=</span><span class="va">None</span>)
dump_all(data, stream<span class="op">=</span><span class="va">None</span>, Dumper<span class="op">=</span>Dumper, ...)

safe_dump(data, stream<span class="op">=</span><span class="va">None</span>, ...)
safe_dump_all(data, stream<span class="op">=</span><span class="va">None</span>, ...)</code></pre></div>
<p><code>load(stream)</code> parses the given <code>stream</code> and returns a Python object constructed from for the first document in the stream. If there are no documents in the stream, it returns <code>None</code>.</p>
<p><code>load_all(stream)</code> parses the given <code>stream</code> and returns a sequence of Python objects corresponding to the documents in the stream.</p>
<p><code>safe_load(stream)</code> parses the given <code>stream</code> and returns a Python object constructed from for the first document in the stream. If there are no documents in the stream, it returns <code>None</code>. <code>safe_load</code> recognizes only standard YAML tags and cannot construct an arbitrary Python object.</p>
<p>A python object can be marked as safe and thus be recognized by <code>yaml.safe_load</code>. To do this, derive it from <code>yaml.YAMLObject</code> (as explained in section <em>Constructors, representers, resolvers</em>) and explicitly set its class property <code>yaml_loader</code> to <code>yaml.SafeLoader</code>.</p>
<p><code>safe_load_all(stream)</code> parses the given <code>stream</code> and returns a sequence of Python objects corresponding to the documents in the stream. <code>safe_load_all</code> recognizes only standard YAML tags and cannot construct an arbitrary Python object.</p>
<p><code>dump(data, stream=None)</code> serializes the given Python object into the <code>stream</code>. If <code>stream</code> is <code>None</code>, it returns the produced stream.</p>
<p><code>dump_all(data, stream=None)</code> serializes the given sequence of Python objects into the given <code>stream</code>. If <code>stream</code> is <code>None</code>, it returns the produced stream. Each object is represented as a YAML document.</p>
<p><code>safe_dump(data, stream=None)</code> serializes the given Python object into the <code>stream</code>. If <code>stream</code> is <code>None</code>, it returns the produced stream. <code>safe_dump</code> produces only standard YAML tags and cannot represent an arbitrary Python object.</p>
<p><code>safe_dump_all(data, stream=None)</code> serializes the given sequence of Python objects into the given <code>stream</code>. If <code>stream</code> is <code>None</code>, it returns the produced stream. Each object is represented as a YAML document. <code>safe_dump_all</code> produces only standard YAML tags and cannot represent an arbitrary Python object.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> constructor(loader, node):
    <span class="co"># ...</span>
    <span class="cf">return</span> data

<span class="kw">def</span> multi_constructor(loader, tag_suffix, node):
    <span class="co"># ...</span>
    <span class="cf">return</span> data

add_constructor(tag, constructor, Loader<span class="op">=</span>Loader)
add_multi_constructor(tag_prefix, multi_constructor, Loader<span class="op">=</span>Loader)</code></pre></div>
<p><code>add_constructor(tag, constructor)</code> specifies a <code>constructor</code> for the given <code>tag</code>. A constructor is a function that converts a node of a YAML representation graph to a native Python object. A constructor accepts an instance of <code>Loader</code> and a node and returns a Python object.</p>
<p><code>add_multi_constructor(tag_prefix, multi_constructor)</code> specifies a <code>multi_constructor</code> for the given <code>tag_prefix</code>. A multi-constructor is a function that converts a node of a YAML representation graph to a native Python object. A multi-constructor accepts an instance of <code>Loader</code>, the suffix of the node tag, and a node and returns a Python object.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> representer(dumper, data):
    <span class="co"># ...</span>
    <span class="cf">return</span> node

<span class="kw">def</span> multi_representer(dumper, data):
    <span class="co"># ...</span>
    <span class="cf">return</span> node

add_representer(data_type, representer, Dumper<span class="op">=</span>Dumper)
add_multi_representer(base_data_type, multi_representer, Dumper<span class="op">=</span>Dumper)</code></pre></div>
<p><code>add_representer(data_type, representer)</code> specifies a <code>representer</code> for Python objects of the given <code>data_type</code>. A representer is a function that converts a native Python object to a node of a YAML representation graph. A representer accepts an instance of <code>Dumper</code> and an object and returns a node.</p>
<p><code>add_multi_representer(base_data_type, multi_representer)</code> specifies a <code>multi_representer</code> for Python objects of the given <code>base_data_type</code> or any of its subclasses. A multi-representer is a function that converts a native Python object to a node of a YAML representation graph. A multi-representer accepts an instance of <code>Dumper</code> and an object and returns a node.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">add_implicit_resolver(tag, regexp, first, Loader<span class="op">=</span>Loader, Dumper<span class="op">=</span>Dumper)
add_path_resolver(tag, path, kind, Loader<span class="op">=</span>Loader, Dumper<span class="op">=</span>Dumper)</code></pre></div>
<p><code>add_implicit_resolver(tag, regexp, first)</code> adds an implicit tag resolver for plain scalars. If the scalar value is matched the given <code>regexp</code>, it is assigned the <code>tag</code>. <code>first</code> is a list of possible initial characters or <code>None</code>.</p>
<p><code>add_path_resolver(tag, path, kind)</code> adds a path-based implicit tag resolver. A <code>path</code> is a list of keys that form a path to a node in the representation graph. Paths elements can be string values, integers, or <code>None</code>. The <code>kind</code> of a node can be <code>str</code>, <code>list</code>, <code>dict</code>, or <code>None</code>.</p>
<h3 id="mark">Mark</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">Mark(name, index, line, column, <span class="bu">buffer</span>, pointer)</code></pre></div>
<p>An instance of <code>Mark</code> points to a certain position in the input stream. <code>name</code> is the name of the stream, for instance it may be the filename if the input stream is a file. <code>line</code> and <code>column</code> is the line and column of the position (starting from 0). <code>buffer</code>, when it is not <code>None</code>, is a part of the input stream that contain the position and <code>pointer</code> refers to the position in the <code>buffer</code>.</p>
<h3 id="yamlerror">YAMLError</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">YAMLError()</code></pre></div>
<p>If the YAML parser encounters an error condition, it raises an exception which is an instance of <code>YAMLError</code> or of its subclass. An application may catch this exception and warn a user.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">try</span>:
    config <span class="op">=</span> yaml.load(<span class="bu">file</span>(<span class="st">'config.yaml'</span>, <span class="st">'r'</span>))
<span class="cf">except</span> yaml.YAMLError, exc:
    <span class="bu">print</span> <span class="st">&quot;Error in configuration file:&quot;</span>, exc</code></pre></div>
<p>An exception produced by the YAML processor may point to the problematic position.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="cf">try</span>:
...     yaml.load(<span class="st">&quot;unbalanced blackets: ][&quot;</span>)
... <span class="cf">except</span> yaml.YAMLError, exc:
...     <span class="cf">if</span> <span class="bu">hasattr</span>(exc, <span class="st">'problem_mark'</span>):
...         mark <span class="op">=</span> exc.problem_mark
...         <span class="bu">print</span> <span class="st">&quot;Error position: (</span><span class="sc">%s</span><span class="st">:</span><span class="sc">%s</span><span class="st">)&quot;</span> <span class="op">%</span> (mark.line<span class="dv">+1</span>, mark.column<span class="dv">+1</span>)

Error position: (<span class="dv">1</span>:<span class="dv">22</span>)</code></pre></div>
<h3 id="tokens">Tokens</h3>
<p>Tokens are produced by a YAML scanner. They are not really useful except for low-level YAML applications such as syntax highlighting.</p>
<p>The PyYAML scanner produces the following types of tokens:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">StreamStartToken(encoding, start_mark, end_mark) <span class="co"># Start of the stream.</span>
StreamEndToken(start_mark, end_mark) <span class="co"># End of the stream.</span>
DirectiveToken(name, value, start_mark, end_mark) <span class="co"># YAML directive, either %YAML or %TAG.</span>
DocumentStartToken(start_mark, end_mark) <span class="co"># '---'.</span>
DocumentEndToken(start_mark, end_mark) <span class="co"># '...'.</span>
BlockSequenceStartToken(start_mark, end_mark) <span class="co"># Start of a new block sequence.</span>
BlockMappingStartToken(start_mark, end_mark) <span class="co"># Start of a new block mapping.</span>
BlockEndToken(start_mark, end_mark) <span class="co"># End of a block collection.</span>
FlowSequenceStartToken(start_mark, end_mark) <span class="co"># '['.</span>
FlowMappingStartToken(start_mark, end_mark) <span class="co"># '{'.</span>
FlowSequenceEndToken(start_mark, end_mark) <span class="co"># ']'.</span>
FlowMappingEndToken(start_mark, end_mark) <span class="co"># '}'.</span>
KeyToken(start_mark, end_mark) <span class="co"># Either '?' or start of a simple key.</span>
ValueToken(start_mark, end_mark) <span class="co"># ':'.</span>
BlockEntryToken(start_mark, end_mark) <span class="co"># '-'.</span>
FlowEntryToken(start_mark, end_mark) <span class="co"># ','.</span>
AliasToken(value, start_mark, end_mark) <span class="co"># '*value'.</span>
AnchorToken(value, start_mark, end_mark) <span class="co"># '&amp;value'.</span>
TagToken(value, start_mark, end_mark) <span class="co"># '!value'.</span>
ScalarToken(value, plain, style, start_mark, end_mark) <span class="co"># 'value'.</span></code></pre></div>
<p><code>start_mark</code> and <code>end_mark</code> denote the beginning and the end of a token.</p>
<p>Example:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> document <span class="op">=</span> <span class="st">&quot;&quot;&quot;</span>
<span class="st">... ---</span>
<span class="st">... block sequence:</span>
<span class="st">... - BlockEntryToken</span>
<span class="st">... block mapping:</span>
<span class="st">...   ? KeyToken</span>
<span class="st">...   : ValueToken</span>
<span class="st">... flow sequence: [FlowEntryToken, FlowEntryToken]</span>
<span class="st">... flow mapping: {KeyToken: ValueToken}</span>
<span class="st">... anchors and tags:</span>
<span class="st">... - &amp;A !!int '5'</span>
<span class="st">... - *A</span>
<span class="st">... ...</span>
<span class="st">... &quot;&quot;&quot;</span>

<span class="op">&gt;&gt;&gt;</span> <span class="cf">for</span> token <span class="op">in</span> yaml.scan(document):
...     <span class="bu">print</span> token

StreamStartToken(encoding<span class="op">=</span><span class="st">'utf-8'</span>)

DocumentStartToken()

BlockMappingStartToken()

KeyToken()
ScalarToken(plain<span class="op">=</span><span class="va">True</span>, style<span class="op">=</span><span class="va">None</span>, value<span class="op">=</span><span class="st">u'block sequence'</span>)

ValueToken()
BlockEntryToken()
ScalarToken(plain<span class="op">=</span><span class="va">True</span>, style<span class="op">=</span><span class="va">None</span>, value<span class="op">=</span><span class="st">u'BlockEntryToken'</span>)

KeyToken()
ScalarToken(plain<span class="op">=</span><span class="va">True</span>, style<span class="op">=</span><span class="va">None</span>, value<span class="op">=</span><span class="st">u'block mapping'</span>)

ValueToken()
BlockMappingStartToken()

KeyToken()
ScalarToken(plain<span class="op">=</span><span class="va">True</span>, style<span class="op">=</span><span class="va">None</span>, value<span class="op">=</span><span class="st">u'KeyToken'</span>)
ValueToken()
ScalarToken(plain<span class="op">=</span><span class="va">True</span>, style<span class="op">=</span><span class="va">None</span>, value<span class="op">=</span><span class="st">u'ValueToken'</span>)
BlockEndToken()

KeyToken()
ScalarToken(plain<span class="op">=</span><span class="va">True</span>, style<span class="op">=</span><span class="va">None</span>, value<span class="op">=</span><span class="st">u'flow sequence'</span>)

ValueToken()
FlowSequenceStartToken()
ScalarToken(plain<span class="op">=</span><span class="va">True</span>, style<span class="op">=</span><span class="va">None</span>, value<span class="op">=</span><span class="st">u'FlowEntryToken'</span>)
FlowEntryToken()
ScalarToken(plain<span class="op">=</span><span class="va">True</span>, style<span class="op">=</span><span class="va">None</span>, value<span class="op">=</span><span class="st">u'FlowEntryToken'</span>)
FlowSequenceEndToken()

KeyToken()
ScalarToken(plain<span class="op">=</span><span class="va">True</span>, style<span class="op">=</span><span class="va">None</span>, value<span class="op">=</span><span class="st">u'flow mapping'</span>)

ValueToken()
FlowMappingStartToken()
KeyToken()
ScalarToken(plain<span class="op">=</span><span class="va">True</span>, style<span class="op">=</span><span class="va">None</span>, value<span class="op">=</span><span class="st">u'KeyToken'</span>)
ValueToken()
ScalarToken(plain<span class="op">=</span><span class="va">True</span>, style<span class="op">=</span><span class="va">None</span>, value<span class="op">=</span><span class="st">u'ValueToken'</span>)
FlowMappingEndToken()

KeyToken()
ScalarToken(plain<span class="op">=</span><span class="va">True</span>, style<span class="op">=</span><span class="va">None</span>, value<span class="op">=</span><span class="st">u'anchors and tags'</span>)

ValueToken()
BlockEntryToken()
AnchorToken(value<span class="op">=</span><span class="st">u'A'</span>)
TagToken(value<span class="op">=</span>(<span class="st">u'!!'</span>, <span class="st">u'int'</span>))
ScalarToken(plain<span class="op">=</span><span class="va">False</span>, style<span class="op">=</span><span class="st">&quot;'&quot;</span>, value<span class="op">=</span><span class="st">u'5'</span>)

BlockEntryToken()
AliasToken(value<span class="op">=</span><span class="st">u'A'</span>)

BlockEndToken()

DocumentEndToken()

StreamEndToken()</code></pre></div>
<h3 id="events">Events</h3>
<p>Events are used by the low-level Parser and Emitter interfaces, which are similar to the SAX API. While the Parser parses a YAML stream and produces a sequence of events, the Emitter accepts a sequence of events and emits a YAML stream.</p>
<p>The following events are defined:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">StreamStartEvent(encoding, start_mark, end_mark)
StreamEndEvent(start_mark, end_mark)
DocumentStartEvent(explicit, version, tags, start_mark, end_mark)
DocumentEndEvent(start_mark, end_mark)
SequenceStartEvent(anchor, tag, implicit, flow_style, start_mark, end_mark)
SequenceEndEvent(start_mark, end_mark)
MappingStartEvent(anchor, tag, implicit, flow_style, start_mark, end_mark)
MappingEndEvent(start_mark, end_mark)
AliasEvent(anchor, start_mark, end_mark)
ScalarEvent(anchor, tag, implicit, value, style, start_mark, end_mark)</code></pre></div>
<p>The <code>flow_style</code> flag indicates if a collection is block or flow. The possible values are <code>None</code>, <code>True</code>, <code>False</code>. The <code>style</code> flag of a scalar event indicates the style of the scalar. Possible values are <code>None</code>, <code>_</code>, <code>'\_</code>, <code>'&quot;'</code>, <code>'|'</code>, <code>'&gt;'</code>. The <code>implicit</code> flag of a collection start event indicates if the tag may be omitted when the collection is emitted. The <code>implicit</code> flag of a scalar event is a pair of boolean values that indicate if the tag may be omitted when the scalar is emitted in a plain and non-plain style correspondingly.</p>
<p>Example:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> document <span class="op">=</span> <span class="st">&quot;&quot;&quot;</span>
<span class="st">... scalar: &amp;A !!int '5'</span>
<span class="st">... alias: *A</span>
<span class="st">... sequence: [1, 2, 3]</span>
<span class="st">... mapping: [1: one, 2: two, 3: three]</span>
<span class="st">... &quot;&quot;&quot;</span>

<span class="op">&gt;&gt;&gt;</span> <span class="cf">for</span> event <span class="op">in</span> yaml.parse(document):
...     <span class="bu">print</span> event

StreamStartEvent()

DocumentStartEvent()

MappingStartEvent(anchor<span class="op">=</span><span class="va">None</span>, tag<span class="op">=</span><span class="va">None</span>, implicit<span class="op">=</span><span class="va">True</span>)

ScalarEvent(anchor<span class="op">=</span><span class="va">None</span>, tag<span class="op">=</span><span class="va">None</span>, implicit<span class="op">=</span>(<span class="va">True</span>, <span class="va">False</span>), value<span class="op">=</span><span class="st">u'scalar'</span>)
ScalarEvent(anchor<span class="op">=</span><span class="st">u'A'</span>, tag<span class="op">=</span><span class="st">u'tag:yaml.org,2002:int'</span>, implicit<span class="op">=</span>(<span class="va">False</span>, <span class="va">False</span>), value<span class="op">=</span><span class="st">u'5'</span>)

ScalarEvent(anchor<span class="op">=</span><span class="va">None</span>, tag<span class="op">=</span><span class="va">None</span>, implicit<span class="op">=</span>(<span class="va">True</span>, <span class="va">False</span>), value<span class="op">=</span><span class="st">u'alias'</span>)
AliasEvent(anchor<span class="op">=</span><span class="st">u'A'</span>)

ScalarEvent(anchor<span class="op">=</span><span class="va">None</span>, tag<span class="op">=</span><span class="va">None</span>, implicit<span class="op">=</span>(<span class="va">True</span>, <span class="va">False</span>), value<span class="op">=</span><span class="st">u'sequence'</span>)
SequenceStartEvent(anchor<span class="op">=</span><span class="va">None</span>, tag<span class="op">=</span><span class="va">None</span>, implicit<span class="op">=</span><span class="va">True</span>)
ScalarEvent(anchor<span class="op">=</span><span class="va">None</span>, tag<span class="op">=</span><span class="va">None</span>, implicit<span class="op">=</span>(<span class="va">True</span>, <span class="va">False</span>), value<span class="op">=</span><span class="st">u'1'</span>)
ScalarEvent(anchor<span class="op">=</span><span class="va">None</span>, tag<span class="op">=</span><span class="va">None</span>, implicit<span class="op">=</span>(<span class="va">True</span>, <span class="va">False</span>), value<span class="op">=</span><span class="st">u'2'</span>)
ScalarEvent(anchor<span class="op">=</span><span class="va">None</span>, tag<span class="op">=</span><span class="va">None</span>, implicit<span class="op">=</span>(<span class="va">True</span>, <span class="va">False</span>), value<span class="op">=</span><span class="st">u'3'</span>)
SequenceEndEvent()

ScalarEvent(anchor<span class="op">=</span><span class="va">None</span>, tag<span class="op">=</span><span class="va">None</span>, implicit<span class="op">=</span>(<span class="va">True</span>, <span class="va">False</span>), value<span class="op">=</span><span class="st">u'mapping'</span>)
MappingStartEvent(anchor<span class="op">=</span><span class="va">None</span>, tag<span class="op">=</span><span class="va">None</span>, implicit<span class="op">=</span><span class="va">True</span>)
ScalarEvent(anchor<span class="op">=</span><span class="va">None</span>, tag<span class="op">=</span><span class="va">None</span>, implicit<span class="op">=</span>(<span class="va">True</span>, <span class="va">False</span>), value<span class="op">=</span><span class="st">u'1'</span>)
ScalarEvent(anchor<span class="op">=</span><span class="va">None</span>, tag<span class="op">=</span><span class="va">None</span>, implicit<span class="op">=</span>(<span class="va">True</span>, <span class="va">False</span>), value<span class="op">=</span><span class="st">u'one'</span>)
ScalarEvent(anchor<span class="op">=</span><span class="va">None</span>, tag<span class="op">=</span><span class="va">None</span>, implicit<span class="op">=</span>(<span class="va">True</span>, <span class="va">False</span>), value<span class="op">=</span><span class="st">u'2'</span>)
ScalarEvent(anchor<span class="op">=</span><span class="va">None</span>, tag<span class="op">=</span><span class="va">None</span>, implicit<span class="op">=</span>(<span class="va">True</span>, <span class="va">False</span>), value<span class="op">=</span><span class="st">u'two'</span>)
ScalarEvent(anchor<span class="op">=</span><span class="va">None</span>, tag<span class="op">=</span><span class="va">None</span>, implicit<span class="op">=</span>(<span class="va">True</span>, <span class="va">False</span>), value<span class="op">=</span><span class="st">u'3'</span>)
ScalarEvent(anchor<span class="op">=</span><span class="va">None</span>, tag<span class="op">=</span><span class="va">None</span>, implicit<span class="op">=</span>(<span class="va">True</span>, <span class="va">False</span>), value<span class="op">=</span><span class="st">u'three'</span>)
MappingEndEvent()

MappingEndEvent()

DocumentEndEvent()

StreamEndEvent()

<span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> yaml.emit([
...     yaml.StreamStartEvent(encoding<span class="op">=</span><span class="st">'utf-8'</span>),
...     yaml.DocumentStartEvent(explicit<span class="op">=</span><span class="va">True</span>),
...     yaml.MappingStartEvent(anchor<span class="op">=</span><span class="va">None</span>, tag<span class="op">=</span><span class="st">u'tag:yaml.org,2002:map'</span>, implicit<span class="op">=</span><span class="va">True</span>, flow_style<span class="op">=</span><span class="va">False</span>),
...     yaml.ScalarEvent(anchor<span class="op">=</span><span class="va">None</span>, tag<span class="op">=</span><span class="st">u'tag:yaml.org,2002:str'</span>, implicit<span class="op">=</span>(<span class="va">True</span>, <span class="va">True</span>), value<span class="op">=</span><span class="st">u'agile languages'</span>),
...     yaml.SequenceStartEvent(anchor<span class="op">=</span><span class="va">None</span>, tag<span class="op">=</span><span class="st">u'tag:yaml.org,2002:seq'</span>, implicit<span class="op">=</span><span class="va">True</span>, flow_style<span class="op">=</span><span class="va">True</span>),
...     yaml.ScalarEvent(anchor<span class="op">=</span><span class="va">None</span>, tag<span class="op">=</span><span class="st">u'tag:yaml.org,2002:str'</span>, implicit<span class="op">=</span>(<span class="va">True</span>, <span class="va">True</span>), value<span class="op">=</span><span class="st">u'Python'</span>),
...     yaml.ScalarEvent(anchor<span class="op">=</span><span class="va">None</span>, tag<span class="op">=</span><span class="st">u'tag:yaml.org,2002:str'</span>, implicit<span class="op">=</span>(<span class="va">True</span>, <span class="va">True</span>), value<span class="op">=</span><span class="st">u'Perl'</span>),
...     yaml.ScalarEvent(anchor<span class="op">=</span><span class="va">None</span>, tag<span class="op">=</span><span class="st">u'tag:yaml.org,2002:str'</span>, implicit<span class="op">=</span>(<span class="va">True</span>, <span class="va">True</span>), value<span class="op">=</span><span class="st">u'Ruby'</span>),
...     yaml.SequenceEndEvent(),
...     yaml.MappingEndEvent(),
...     yaml.DocumentEndEvent(explicit<span class="op">=</span><span class="va">True</span>),
...     yaml.StreamEndEvent(),
... ])

<span class="op">---</span>
agile languages: [Python, Perl, Ruby]
...</code></pre></div>
<h3 id="nodes">Nodes</h3>
<p>Nodes are entities in the YAML informational model. There are three kinds of nodes: <em>scalar</em>, <em>sequence</em>, and <em>mapping</em>. In PyYAML, nodes are produced by Composer and can be serialized to a YAML stream by Serializer.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">ScalarNode(tag, value, style, start_mark, end_mark)
SequenceNode(tag, value, flow_style, start_mark, end_mark)
MappingNode(tag, value, flow_style, start_mark, end_mark)</code></pre></div>
<p>The <code>style</code> and <code>flow_style</code> flags have the same meaning as for events. The value of a scalar node must be a unicode string. The value of a sequence node is a list of nodes. The value of a mapping node is a list of pairs consisting of key and value nodes.</p>
<p>Example:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> yaml.compose(<span class="st">&quot;&quot;&quot;</span>
<span class="st">... kinds:</span>
<span class="st">... - scalar</span>
<span class="st">... - sequence</span>
<span class="st">... - mapping</span>
<span class="st">... &quot;&quot;&quot;</span>)

MappingNode(tag<span class="op">=</span><span class="st">u'tag:yaml.org,2002:map'</span>, value<span class="op">=</span>[
    (ScalarNode(tag<span class="op">=</span><span class="st">u'tag:yaml.org,2002:str'</span>, value<span class="op">=</span><span class="st">u'kinds'</span>), SequenceNode(tag<span class="op">=</span><span class="st">u'tag:yaml.org,2002:seq'</span>, value<span class="op">=</span>[
        ScalarNode(tag<span class="op">=</span><span class="st">u'tag:yaml.org,2002:str'</span>, value<span class="op">=</span><span class="st">u'scalar'</span>),
        ScalarNode(tag<span class="op">=</span><span class="st">u'tag:yaml.org,2002:str'</span>, value<span class="op">=</span><span class="st">u'sequence'</span>),
        ScalarNode(tag<span class="op">=</span><span class="st">u'tag:yaml.org,2002:str'</span>, value<span class="op">=</span><span class="st">u'mapping'</span>)]))])

<span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span> yaml.serialize(yaml.SequenceNode(tag<span class="op">=</span><span class="st">u'tag:yaml.org,2002:seq'</span>, value<span class="op">=</span>[
...     yaml.ScalarNode(tag<span class="op">=</span><span class="st">u'tag:yaml.org,2002:str'</span>, value<span class="op">=</span><span class="st">u'scalar'</span>),
...     yaml.ScalarNode(tag<span class="op">=</span><span class="st">u'tag:yaml.org,2002:str'</span>, value<span class="op">=</span><span class="st">u'sequence'</span>),
...     yaml.ScalarNode(tag<span class="op">=</span><span class="st">u'tag:yaml.org,2002:str'</span>, value<span class="op">=</span><span class="st">u'mapping'</span>)]))

<span class="op">-</span> scalar
<span class="op">-</span> sequence
<span class="op">-</span> mapping</code></pre></div>
<h3 id="loader">Loader</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">Loader(stream)
SafeLoader(stream)
BaseLoader(stream)

<span class="co"># The following classes are available only if you build LibYAML bindings.</span>
CLoader(stream)
CSafeLoader(stream)
CBaseLoader(stream)</code></pre></div>
<p><code>Loader(stream)</code> is the most common of the above classes and should be used in most cases. <code>stream</code> is an input YAML stream. It can be a string, a Unicode string, an open file, an open Unicode file.</p>
<p><code>Loader</code> supports all predefined tags and may construct an arbitrary Python object. Therefore it is not safe to use <code>Loader</code> to load a document received from an untrusted source. By default, the functions <code>scan</code>, <code>parse</code>, <code>compose</code>, <code>construct</code>, and others use <code>Loader</code>.</p>
<p><code>SafeLoader(stream)</code> supports only standard YAML tags and thus it does not construct class instances and probably safe to use with documents received from an untrusted source. The functions <code>safe_load</code> and <code>safe_load_all</code> use <code>SafeLoader</code> to parse a stream.</p>
<p><code>BaseLoader(stream)</code> does not resolve or support any tags and construct only basic Python objects: lists, dictionaries and Unicode strings.</p>
<p><code>CLoader</code>, <code>CSafeLoader</code>, <code>CBaseLoader</code> are versions of the above classes written in C using the <a href="LibYAML" class="uri">LibYAML</a> library.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">Loader.check_token(<span class="op">*</span>TokenClasses)
Loader.peek_token()
Loader.get_token()</code></pre></div>
<p><code>Loader.check_token(*TokenClasses)</code> returns <code>True</code> if the next token in the stream is an instance of one of the given <code>TokenClasses</code>. Otherwise it returns <code>False</code>.</p>
<p><code>Loader.peek_token()</code> returns the next token in the stream, but does not remove it from the internal token queue. The function returns <code>None</code> at the end of the stream.</p>
<p><code>Loader.get_token()</code> returns the next token in the stream and removes it from the internal token queue. The function returns <code>None</code> at the end of the stream.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">Loader.check_event(<span class="op">*</span>EventClasses)
Loader.peek_event()
Loader.get_event()</code></pre></div>
<p><code>Loader.check_event(*EventClasses)</code> returns <code>True</code> if the next event in the stream is an instance of one of the given <code>EventClasses</code>. Otherwise it returns <code>False</code>.</p>
<p><code>Loader.peek_event()</code> returns the next event in the stream, but does not remove it from the internal event queue. The function returns <code>None</code> at the end of the stream.</p>
<p><code>Loader.get_event()</code> returns the next event in the stream and removes it from the internal event queue. The function returns <code>None</code> at the end of the stream.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">Loader.check_node()
Loader.get_node()</code></pre></div>
<p><code>Loader.check_node()</code> returns <code>True</code> is there are more documents available in the stream. Otherwise it returns <code>False</code>.</p>
<p><code>Loader.get_node()</code> construct the representation graph of the next document in the stream and returns its root node.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">Loader.check_data()
Loader.get_data()

Loader.add_constructor(tag, constructor) <span class="co"># Loader.add_constructor is a class method.</span>
Loader.add_multi_constructor(tag_prefix, multi_constructor) <span class="co"># Loader.add_multi_constructor is a class method.</span>

Loader.construct_scalar(node)
Loader.construct_sequence(node)
Loader.construct_mapping(node)</code></pre></div>
<p><code>Loader.check_data()</code> returns <code>True</code> is there are more documents available in the stream. Otherwise it returns <code>False</code>.</p>
<p><code>Loader.get_data()</code> constructs and returns a Python object corresponding to the next document in the stream.</p>
<p><code>Loader.add_constructor(tag, constructor)</code>: see <code>add_constructor</code>.</p>
<p><code>Loader.add_multi_constructor(tag_prefix, multi_constructor)</code>: see <code>add_multi_constructor</code>.</p>
<p><code>Loader.construct_scalar(node)</code> checks that the given <code>node</code> is a scalar and returns its value. This function is intended to be used in constructors.</p>
<p><code>Loader.construct_sequence(node)</code> checks that the given <code>node</code> is a sequence and returns a list of Python objects corresponding to the node items. This function is intended to be used in constructors.</p>
<p><code>Loader.construct_mapping(node)</code> checks that the given <code>node</code> is a mapping and returns a dictionary of Python objects corresponding to the node keys and values. This function is intended to be used in constructors.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">Loader.add_implicit_resolver(tag, regexp, first) <span class="co"># Loader.add_implicit_resolver is a class method.</span>
Loader.add_path_resolver(tag, path, kind) <span class="co"># Loader.add_path_resolver is a class method.</span></code></pre></div>
<p><code>Loader.add_implicit_resolver(tag, regexp, first)</code>: see <code>add_implicit_resolver</code>.</p>
<p><code>Loader.add_path_resolver(tag, path, kind)</code>: see <code>add_path_resolver</code>.</p>
<h3 id="dumper">Dumper</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">Dumper(stream,
    default_style<span class="op">=</span><span class="va">None</span>,
    default_flow_style<span class="op">=</span><span class="va">None</span>,
    canonical<span class="op">=</span><span class="va">None</span>,
    indent<span class="op">=</span><span class="va">None</span>,
    width<span class="op">=</span><span class="va">None</span>,
    allow_unicode<span class="op">=</span><span class="va">None</span>,
    line_break<span class="op">=</span><span class="va">None</span>,
    encoding<span class="op">=</span><span class="va">None</span>,
    explicit_start<span class="op">=</span><span class="va">None</span>,
    explicit_end<span class="op">=</span><span class="va">None</span>,
    version<span class="op">=</span><span class="va">None</span>,
    tags<span class="op">=</span><span class="va">None</span>)
SafeDumper(stream, ...)
BaseDumper(stream, ...)

<span class="co"># The following classes are available only if you build LibYAML bindings.</span>
CDumper(stream, ...)
CSafeDumper(stream, ...)
CBaseDumper(stream, ...)</code></pre></div>
<p><code>Dumper(stream)</code> is the most common of the above classes and should be used in most cases. <code>stream</code> is an output YAML stream. It can be an open file or an open Unicode file.</p>
<p><code>Dumper</code> supports all predefined tags and may represent an arbitrary Python object. Therefore it may produce a document that cannot be loaded by other YAML processors. By default, the functions <code>emit</code>, <code>serialize</code>, <code>dump</code>, and others use <code>Dumper</code>.</p>
<p><code>SafeDumper(stream)</code> produces only standard YAML tags and thus cannot represent class instances and probably more compatible with other YAML processors. The functions <code>safe_dump</code> and <code>safe_dump_all</code> use <code>SafeDumper</code> to produce a YAML document.</p>
<p><code>BaseDumper(stream)</code> does not support any tags and is useful only for subclassing.</p>
<p><code>CDumper</code>, <code>CSafeDumper</code>, <code>CBaseDumper</code> are versions of the above classes written in C using the <a href="LibYAML" class="uri">LibYAML</a> library.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">Dumper.emit(event)</code></pre></div>
<p><code>Dumper.emit(event)</code> serializes the given <code>event</code> and writes it to the output stream.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">Dumper.<span class="bu">open</span>()
Dumper.serialize(node)
Dumper.close()</code></pre></div>
<p><code>Dumper.open()</code> emits <code>StreamStartEvent</code>.</p>
<p><code>Dumper.serialize(node)</code> serializes the given representation graph into the output stream.</p>
<p><code>Dumper.close()</code> emits <code>StreamEndEvent</code>.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">Dumper.represent(data)

Dumper.add_representer(data_type, representer) <span class="co"># Dumper.add_representer is a class method.</span>
Dumper.add_multi_representer(base_data_type, multi_representer) <span class="co"># Dumper.add_multi_representer is a class method.</span>

Dumper.represent_scalar(tag, value, style<span class="op">=</span><span class="va">None</span>)
Dumper.represent_sequence(tag, value, flow_style<span class="op">=</span><span class="va">None</span>)
Dumper.represent_mapping(tag, value, flow_style<span class="op">=</span><span class="va">None</span>)</code></pre></div>
<p><code>Dumper.represent(data)</code> serializes the given Python object to the output YAML stream.</p>
<p><code>Dumper.add_representer(data_type, representer)</code>: see <code>add_representer</code>.</p>
<p><code>Dumper.add_multi_representer(base_data_type, multi_representer)</code>: see <code>add_multi_representer</code>.</p>
<p><code>Dumper.represent_scalar(tag, value, style=None)</code> returns a scalar node with the given <code>tag</code>, <code>value</code>, and <code>style</code>. This function is intended to be used in representers.</p>
<p><code>Dumper.represent_sequence(tag, sequence, flow_style=None)</code> return a sequence node with the given <code>tag</code> and subnodes generated from the items of the given <code>sequence</code>.</p>
<p><code>Dumper.represent_mapping(tag, mapping, flow_style=None)</code> return a mapping node with the given <code>tag</code> and subnodes generated from the keys and values of the given <code>mapping</code>.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">Dumper.add_implicit_resolver(tag, regexp, first) <span class="co"># Dumper.add_implicit_resolver is a class method.</span>
Dumper.add_path_resolver(tag, path, kind) <span class="co"># Dumper.add_path_resolver is a class method.</span></code></pre></div>
<p><code>Dumper.add_implicit_resolver(tag, regexp, first)</code>: see <code>add_implicit_resolver</code>.</p>
<p><code>Dumper.add_path_resolver(tag, path, kind)</code>: see <code>add_path_resolver</code>.</p>
<h3 id="yamlobject">YAMLObject</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">class</span> MyYAMLObject(YAMLObject):
    yaml_loader <span class="op">=</span> Loader
    yaml_dumper <span class="op">=</span> Dumper

    yaml_tag <span class="op">=</span> <span class="st">u'...'</span>
    yaml_flow_style <span class="op">=</span> ...

    <span class="at">@classmethod</span>
    <span class="kw">def</span> from_yaml(cls, loader, node):
        <span class="co"># ...</span>
        <span class="cf">return</span> data

    <span class="at">@classmethod</span>
    <span class="kw">def</span> to_yaml(cls, dumper, data):
        <span class="co"># ...</span>
        <span class="cf">return</span> node</code></pre></div>
<p>Subclassing <code>YAMLObject</code> is an easy way to define tags, constructors, and representers for your classes. You only need to override the <code>yaml_tag</code> attribute. If you want to define your custom constructor and representer, redefine the <code>from_yaml</code> and <code>to_yaml</code> method correspondingly.</p>
<h2 id="deviations-from-the-specification">Deviations from the specification</h2>
<p><em>need to update this section</em></p>
<ul>
<li>rules for tabs in YAML are confusing. We are close, but not there yet. Perhaps both the spec and the parser should be fixed. Anyway, the best rule for tabs in YAML is to not use them at all.</li>
<li>Byte order mark. The initial BOM is stripped, but BOMs inside the stream are considered as parts of the content. It can be fixed, but it’s not really important now.</li>
<li><del>Empty plain scalars are not allowed if alias or tag is specified.</del> This is done to prevent anomalities like <em>[ !tag, value]</em>, which can be interpreted both as <em>[ !<!tag,> value ]</em> and <em>[ !<!tag> “”, “value” ]</em>. The spec should be fixed.</li>
<li><p>Indentation of flow collections. The spec requires them to be indented more than their block parent node. Unfortunately this rule renders many intuitively correct constructs invalid, for instance,</p>
<pre><code>block: {
} # this is indentation violation according to the spec.</code></pre></li>
<li><p>‘:’ is not allowed for plain scalars in the flow mode. <del><em>{1:2}</em> is interpreted as <em>{ 1 : 2 }</em>.</del></p></li>
</ul>
</body>
</html>
